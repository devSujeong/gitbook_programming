# HTTP

## History

* HTTP/0.9\(1991년\): GET 메서드만 지원, HTTP 헤더 없음
* HTTP/1.0\(1996년\): 메서드, 헤더 추가
* HTTP/1.1\(1997년\): 가장 많이 사용. RFC2068\(1997\) -&gt; RFC2616\(1999\) -&gt; RFC7230~7235\(2014\)
* HTTP/2.0\(2015년\): 성능 개선
* HTTP/3.0\(진행중\): TCP 대신에 UDP 사용. 성능 개선

{% hint style="info" %}
현재는 1.1을 주로 사용하지만 2, 3도 점점 증가 추세에 있습니다.
{% endhint %}

## Features

### 클라이언트-서버 구조

Request, Response 구조입니다. 클라이언트가 서버에 요청을 보내고 응답을 대기하고 서버는 요청에 대한 결과를 만들어서 응답합니다.

### 무상태 프로토콜\(stateless\), 비연결성

서버가 클라이언트의 상태를 가지고 있지 않습니다. 서버의 확장성이 높아지지만 클라이언트가 추가 데이터를 전송해야 하는 단점이 있습니다. 또한 로그인처럼 무상태로는 진행할 수 없는 경우도 있습니다.

HTTP는 비연결성이므로 클라이언트는 아무 서버와 연결해도 되므로 기존 연결된 서버에 문제가 생겨도 클라이언트는 문제가 되지 않습니다. 한 서버에 클라이언트가 몰리지 않도록 분산도 가능하구요. 따라서 서버 자원을 매우 효율적으로 사용할 수 있습니다. 단점은 TCP/IP 연결을 새로 맺어야 하므로 연결 시간이 증가합니다. 이 문제는 지속 연결\(Persistent Connections\)로 문제를 해결했습니다.

### HTTP 메시지

**HTTP MESSAGE STRUCTURE  
-** 시작라인: Request-line\(메서드, 요청 타깃, http 버전\) or status-line\(http 버전, status-code, reason-phrase\)  
- 헤더: http전송에 필요한 모든 부가 정보. 표준 헤더가 이미 너무 많지만 필요시 임의의 헤더 추가도 가능함. 형태-&gt; field-name: field-value  
- 공백라인:   
- 메시지 바디: 실제로 전송할 데이터.

### 단순함, 확장 가능

## HTTP Method

이상적으로는 API의 URI는 리소스를 식별하는 데 주안점을 줍니다. 따라서 명사들로 이루어지며, 동사에 해당하는 액션은 Method로 처리합니다.

* GET: 리소스 조회
* POST: 요청 데이터 처리. 주로 등록에 사용
* PUT: 리소스를 대채, 해당 리소스가 없으면 생성
* PATCH: 리소스 부분 변경
* DELETE: 리소스 삭
*  HEAD: 리소스를 조회하는데 메시지 부분을 제외하고 상태와 헤더만 반환
* OPTIONS: 대상 리소스에 대한 통신 가능 옵션을 설명
* CONNECT: 대상 자원으로 식별되는 서버에 대한 터널을 설정
* TRACE: 대상 리소스에 대한 경로를 따라 메시지 루프백 테스트를 수

### GET

리소스 조회  
서버에 전달하고 싶은 데이터는 쿼리 파라미터\(, 쿼리 스트링\)을 통해서 전달  
메시지 바디를 사용해서 데이터를 전달할 수 있지만 지원하지 않는 곳이 많아서 비권장.

### POST

요청 데이터 처리  
메시지 바디를 통해 서버로 요청 데이터 전달  
서버는 요청 데이터를 처리하는데 주로 전달된 데이터로 신규 리소스를 등록하거나 프로세스 처리에 사용

### PUT

기존 리소스가 있으면 대체하고, 없으면 생성합니다. 리소스의 일부만 대체하는 게 아니라 전부 대체하는 것이고 클라이언트가 리소스를 식별\(리소스 위치를 알고 URI 지정\)한다는 점이 post와의 차이점 입니다.

### PATCH

리소스를 부분 변경합니다. 대체 아님.

### DELETE

리소스 제거.

### 메서드의 속성

* 안전\(safe\): 호출해도 리소스를 변경하지 않는다.
* 멱등\(idempotent\): 몇 번 호출하든 결과가 똑같다. \(post는 멱등하지 않다.\)
* 캐시가능\(cacheable\): 응답 결과를 캐시해서 사용해도 되는지 여부인데 실제로는 구현이 쉬운 GET, HEAD정도만 캐시로 사용함.



